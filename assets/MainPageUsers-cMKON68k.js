import{j as s,a as y,r as o,L as J,R as O,u as Q,b as H,d as X,e as q,s as D,f as g,h as P,S as U,i as K}from"./index-DenUfiQe.js";const V="/kodeOnline/assets/glass-CvgkEbBP.png",Z="data:image/png;base64,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",$="_yearBorder_989s6_1",ss="_usersSection_989s6_8",es="_userList_989s6_12",ts="_year_989s6_1",rs="_loader_989s6_28",v={yearBorder:$,usersSection:ss,userList:es,year:ts,loader:rs},C=(i,e)=>{if(!i)return e;const t=i.toLowerCase();return e.filter(n=>{var x,f,A;const c=(x=n.firstName)==null?void 0:x.toLowerCase(),l=(f=n.lastName)==null?void 0:f.toLowerCase(),d=(A=n.userTag)==null?void 0:A.toLowerCase();return(c==null?void 0:c.startsWith(t))||(l==null?void 0:l.startsWith(t))||(d==null?void 0:d.startsWith(t))||c&&l&&(c+" "+l).startsWith(t)||c&&l&&(l+" "+c).startsWith(t)})},ns="_usersEmptyList_85l8z_1",as="_article_85l8z_8",cs="_magnifyingGlassImg_85l8z_14",is="_textBox_85l8z_18",os="_title_85l8z_18",ls="_text_85l8z_18",N={usersEmptyList:ns,article:as,magnifyingGlassImg:cs,textBox:is,title:os,text:ls},ms=i=>{const{className:e}=i;return s.jsx("div",{className:y(N.usersEmptyList,{},[e]),children:s.jsxs("article",{className:N.article,children:[s.jsx("div",{className:N.magnifyingGlassImg,children:s.jsx("img",{className:"img",src:V,alt:"magnifying glass"})}),s.jsxs("div",{className:N.textBox,children:[s.jsx("h4",{className:N.title,children:"Мы никого не нашли"}),s.jsx("p",{className:N.text,children:"Попробуй скорректировать запрос"})]})]})})},hs="_user_1grmy_1",us="_userInner_1grmy_12",ds="_userTitle_1grmy_17",gs="_userTag_1grmy_21",xs="_userPosition_1grmy_27",fs="_img_1grmy_31",As="_avatarNotFound_1grmy_41",j={user:hs,userInner:us,userTitle:ds,userTag:gs,userPosition:xs,img:fs,avatarNotFound:As},R=i=>{const{user:e,setActiveUser:t}=i,[a,n]=o.useState(!1),c=l=>{l.currentTarget.src="",n(!0)};return s.jsx("li",{className:j.user,onClick:()=>t(e),children:s.jsx(J,{to:O.user,children:s.jsxs("div",{className:j.userInner,children:[s.jsxs("div",{className:j.img,children:[s.jsx("img",{className:"img",src:e.avatarUrl,alt:`avatar-${e.firstName}`,onError:c,style:a?{display:"none"}:{}}),a&&s.jsx("div",{className:y("img",{[j.avatarNotFound]:a}),style:{backgroundImage:`url(${Q})`}})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:j.userTitle,children:[`${e.firstName} ${e.lastName}`,s.jsx("span",{className:j.userTag,children:e.userTag})]}),s.jsx("p",{className:j.userPosition,children:e.position})]})]})})},e.id)},Es=i=>{const e=new Date(i),t=new Date,a=e.getMonth(),n=e.getDate(),c=t.getMonth(),l=t.getDate();return c>a||c===a&&l>=n},js="_fetchError_2349h_1",ws="_article_2349h_8",Ns="_ufoImg_2349h_15",ys="_textBox_2349h_20",Bs="_title_2349h_23",ps="_text_2349h_20",w={fetchError:js,article:ws,ufoImg:Ns,textBox:ys,title:Bs,text:ps,try:"_try_2349h_30"},vs=i=>{const{className:e}=i;return s.jsx("div",{className:y(w.fetchError,{},[e]),children:s.jsxs("article",{className:w.article,children:[s.jsx("div",{className:w.ufoImg,children:s.jsx("img",{className:"img",src:Z,alt:"magnifying glass"})}),s.jsxs("div",{className:w.textBox,children:[s.jsx("h4",{className:w.title,children:"Какой-то сверхразум все сломал"}),s.jsx("p",{className:w.text,children:"Постараемся быстро починить"}),s.jsx("button",{className:w.try,onClick:()=>window.location.reload(),children:"Попробовать снова"})]})]})})},Ys=(i,e=15)=>{const[t,a]=o.useState(!1),[n,c]=o.useState(null),[l,d]=o.useState(null);return o.useEffect(()=>{const x=E=>{scrollY===0&&(c(E.touches[0].clientY),d(E.touches[0].clientY))},f=E=>{scrollY===0&&n!==null&&(d(E.touches[0].clientY),E.touches[0].clientY-n>e?a(!0):a(!1))},A=()=>{scrollY===0&&t&&i(),a(!1),c(null),d(null)};return window.addEventListener("touchstart",x),window.addEventListener("touchmove",f),window.addEventListener("touchend",A),()=>{window.removeEventListener("touchstart",x),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",A)}},[t,n,i,e,scrollY]),{isRefreshing:t,pullDistance:n!==null&&l!==null?l-n:0}},Us="_loaderSpinner_1vyms_1",Is="_spinner_1vyms_10",b={loaderSpinner:Us,spinner:Is},Fs=({pullDistance:i,className:e})=>{const t=i/80*360,a=Math.min(360,t);return s.jsx("div",{className:b.loaderSpinner,children:s.jsx("div",{className:y(b.spinner,{},[e]),style:{rotate:`${a}deg`}})})},Ds=i=>{const{className:e}=i,t=H(),a=X(q),[n,c]=o.useState(null),[l,d]=o.useState([]),[x,f]=o.useState([]),[A,E]=o.useState(!1),m=a.sortBy,_=a.isLoading,Y=a.searchInUsers,S=a.refresh,G=a.hasFetched,u=a.activeDepartment,B=a.prevDepartmentData,h=a.departments[u],M=new Date().getFullYear()+1,W=o.useRef(m),T=o.useRef(u),k=()=>{t(g.setRefresh(!0))},{isRefreshing:z,pullDistance:L}=Ys(k);o.useEffect(()=>{let r=[];h&&(r=D(m,r,h),t(g.setUsersByDepartment(P(u,r))),c(r),W.current=m)},[m,u]),o.useEffect(()=>{if(Y.length===0&&h){if(B.length>0){const r=D(m,[],B);c(r),t(g.setUsersByDepartment(P(u,r)))}}else if(h){let r;B.length===0?r=C(Y,h):r=C(Y,B),r.length!==h.length&&B.length===0&&t(g.setPrevDepartmentData(h));const p=D(m,[],r);t(g.setUsersByDepartment(P(u,p))),c(p)}},[Y,m]),o.useEffect(()=>{if(h)if(m===U.byDate){const r=[],p=[];h.forEach(F=>{Es(F.birthday)?r.push(F):p.push(F)}),f(r),d(p)}else c(h)},[h,m,u]);const I=o.useCallback(r=>{t(g.setActiveUser(r))},[t]);return o.useEffect(()=>{T.current!==u&&(t(g.setSearchInUsers("")),T.current=u,t(g.setPrevDepartmentData([])))},[u]),o.useEffect(()=>{n!=null&&n.length&&E(!0)},[n]),o.useEffect(()=>{S&&t(g.setRefresh(!1))},[S]),G===!1?s.jsx(vs,{}):(n==null?void 0:n.length)===0&&!_&&!A?s.jsx(ms,{}):s.jsxs("div",{className:y(v.usersSection,{},[e]),children:[s.jsx(Fs,{className:z&&v.loader,pullDistance:L}),s.jsx("ul",{className:v.userList,style:{marginTop:`${Math.max(0,Math.min(80,L))}px`},children:_?s.jsx(K,{}):s.jsxs(s.Fragment,{children:[m===U.byDate&&l.length>0&&l.map(r=>s.jsx(R,{user:r,setActiveUser:I},r.id)),m===U.byDate&&x.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("li",{className:v.yearBorder,children:s.jsx("h4",{className:v.year,children:M})}),x.map(r=>s.jsx(R,{user:r,setActiveUser:I},r.id))]}),m!==U.byDate&&(n==null?void 0:n.map(r=>s.jsx(R,{user:r,setActiveUser:I},r.id)))]})})]})},Ps="_mainPageUsers_1m0f3_1",Rs={mainPageUsers:Ps},Ss=i=>{const{className:e}=i;return s.jsx("section",{className:y(Rs.mainPageUsers,{},[e]),children:s.jsx(Ds,{})})};export{Ss as default};
